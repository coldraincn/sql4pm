# 1. 简单多表查询

## 乘积（笛卡尔积）  

我们使用`select * from box,factory;`  

```bash
mysql> select * from box,factory;
+----+--------------+-------+-------+----+---------------+---------------------+
| id | name         | color | stock | id | name          | build_time          |
+----+--------------+-------+-------+----+---------------+---------------------+
|  1 | 终端盒子     | 紫    |     2 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  4 | NULL         | 红    |    44 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  1 | 终端盒子     | 紫    |     2 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  2 | 高端盒子     | 蓝    |    12 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  3 | 中端盒子     | 红    |     3 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  4 | NULL         | 红    |    44 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  5 | 中端盒子     | 红    |     2 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  6 | 高端盒子     | 红    |     0 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
|  7 | 高端盒子     | 红    |    67 |  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
+----+--------------+-------+-------+----+---------------+---------------------+
56 rows in set (0.00 sec)

```  

可以看到最后的结果有56行，我们分别查下两个表`select * from box;`,`select * from factory;`  

```bash
mysql> select * from box;
+----+--------------+-------+-------+
| id | name         | color | stock |
+----+--------------+-------+-------+
|  1 | 终端盒子     | 紫    |     2 |
|  2 | 高端盒子     | 蓝    |    12 |
|  3 | 中端盒子     | 红    |     3 |
|  4 | NULL         | 红    |    44 |
|  5 | 中端盒子     | 红    |     2 |
|  6 | 高端盒子     | 红    |     0 |
|  7 | 高端盒子     | 红    |    67 |
+----+--------------+-------+-------+
7 rows in set (0.00 sec)
```  

```bash
mysql> select * from factory;
+----+---------------+---------------------+
| id | name          | build_time          |
+----+---------------+---------------------+
|  1 | 盒子工厂1     | 2010-04-05 12:30:32 |
|  2 | 盒子工厂2     | 2010-04-06 12:30:32 |
|  3 | 盒子工厂3     | 2011-04-05 12:30:32 |
|  4 | 盒子工厂4     | 2009-04-05 12:30:32 |
|  5 | 盒子工厂5     | 2003-04-05 12:30:32 |
|  6 | 盒子工厂6     | 2010-05-05 12:30:32 |
|  7 | 盒子工厂7     | 2018-04-05 12:30:32 |
|  8 | 盒子工厂8     | 2010-08-05 12:30:32 |
+----+---------------+---------------------+
8 rows in set (0.00 sec)
```

可以看到box中有7条数据，factory表中有8条数据，我们同时查询两个表的时候有7*8=56条数据，这种一次查询两个表，表示的是两个表的乘积（笛卡尔积），box中的每一行与factory中的每一行亮亮组合在一起的结果。  

## 别名+条件选择  

我们使用乘积查询两个表的时候，发现有两个id，两个name字段，我们可以使用别名，而且可以使用条件筛选，比如我们可以选择box的id等于factory的id的结果`select b.id as bid,b.name as bname,b.color,b.stock,f.id as fid,f.name as fname from box as b,factory as f where b.id=f.id;`  

```sql
select b.id as bid,
b.name as bname,
b.color,
b.stock,
f.id as fid,
f.name as fname from box as b,factory as f where b.id=f.id;
```  

```bash
mysql> select b.id as bid,b.name as bname,b.color,b.stock,f.id as fid,f.name as fname from box as b,factory as f where b.id=f.id;
+-----+--------------+-------+-------+-----+---------------+
| bid | bname        | color | stock | fid | fname         |
+-----+--------------+-------+-------+-----+---------------+
|   1 | 终端盒子     | 紫    |     2 |   1 | 盒子工厂1     |
|   2 | 高端盒子     | 蓝    |    12 |   2 | 盒子工厂2     |
|   3 | 中端盒子     | 红    |     3 |   3 | 盒子工厂3     |
|   4 | NULL         | 红    |    44 |   4 | 盒子工厂4     |
|   5 | 中端盒子     | 红    |     2 |   5 | 盒子工厂5     |
|   6 | 高端盒子     | 红    |     0 |   6 | 盒子工厂6     |
|   7 | 高端盒子     | 红    |    67 |   7 | 盒子工厂7     |
+-----+--------------+-------+-------+-----+---------------+
7 rows in set (0.01 sec)
```